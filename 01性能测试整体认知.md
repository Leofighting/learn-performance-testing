### 性能测试的目的

> 发现性能瓶颈



### 性能测试的分类

> 性能测试是一个非常广泛的概念，包括很多方面的测试，也可称之为非功能测试
>
> 自动化测试属于功能测试的范围，其测试方法要求人员拥有一定的代码能力，被单独分成一个测试模块
>
> 性能测试具体分类：
>
> - 负载测试：通过逐步加压的方法，达到既定的性能阈值的目标；阈值的设定应是小于某个值，比如 CPU 使用率小于等于 80%
> - 压力测试：通过逐步加压的方法，使得系统的某些资源达到饱和，甚至失效的状态
> - 并发测试：在同一时间内，多个虚拟用户同时访问同一模块，同一功能，通常的测试方法是设置集合点
> - 容量测试：通常是指数据库层面的，目标是获取数据库的最佳容量的能力，又称之为容量预估
>   - 具体的测试方法是，在一定的并发用户，不同的基础数据量下，观察数据库的处理能力，即获取数据库的各项性能指标
> - 可靠性测试：指稳定性测试或者疲劳测试；系统在高压情况下，长时间运行系统是否稳定
> - 异常测试：指失败测试，系统构架方面的测试。如在负载均衡的架构中，要测试宕机、节点挂掉等情况系统的反应



### 性能测试的工作流程

> 1. 需求分析：了解项目重点测试内容
> 2. 性能指标制定：吞吐量，`TPS`
> 3. 脚本开发
> 4. 场景设置：符合用户在应用程序上的使用流程
> 5. 监控部署
> 6. 测试执行
> 7. 性能分析：基于监控部署
> 8. 性能调优：如发现异常问题，回到测试执行，进行下一轮循环
> 9. 测试报告



### 常见系统应用分层架构

> 1. 显示层（view）：`web, andriod, ios, H5`
>
> 2. 逻辑控制层（controller）：`API`
> 3. 数据存储层（model）：`mysql, mongodb, redis......`



### 性能测试指标定义

> 事务：从客户端发起的一个或多个请求（这些请求组成一个完整的操作），到客户端接收到从服务器返回的响应
>
> `TPS`：每秒钟系统能够处理的事务数
>
> 请求响应时间：从客户端发起的一个请求开始，到客户端接收到从服务器返回的响应，整个过程所耗费的时间
>
> 事务响应时间：事务可能由一个或多个请求组成，事务响应时间主要是针对于用户的角度而言
>
> 并发：没有严格意义上的并发；并发总有先后，无论差距是 1 毫秒 或者是 1 微秒，总有一个时间差。所以并发讲的是一个时间范围内，比如1秒内
>
> - 多用户在系统上进行同一操作
> - 多用户在系统上进行不同的操作
>
> 并发用户数：同一单位时间内，对系统发起请求的用户数量
>
> 吞吐量：一次性能测试过程中，网络上传输的数据量的总和
>
> 吞吐率：单位时间内网络上传输的数据量；吞吐量 / 传输时间
>
> 点击率：每秒钟用户向服务器提交的请求数
>
> 资源使用率：对不同的系统资源的使用情况



### 性能测试的需求分析

> 分析的目的：
>
> - 明确测试指标
> - 明确测试场景
>
> 新系统：
>
> - 同行业比较
> - 业务预期
>
> 老系统：
>
> - 对比以往的用户使用行为以及用户量



### 性能测试工具

> 常用工具：
>
> - `LoadRunner`
> - `JMeter`
>
> ![image-20200410141645875](E:\测试\性能测试\images_git\01.png)